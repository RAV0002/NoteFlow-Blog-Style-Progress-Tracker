{% extends "blog/base.html" %}
{% block page_header %}
<div class="mt-4 p-5 bg-dark text-white rounded">
    <h1 class="display-6">Thread: {{ post.text }}</h1>
    <p class="lead">{{ post.owner }}</p>
    {% if user.is_authenticated and user == post.owner %}
    <a class="btn btn-outline-warning" href="{% url 'blog:edit_post' post.id %}">Edit thread name</a>
    <a class="btn btn-light" href="{% url 'blog:new_entry' post.id %}">Add entry</a>
    {% endif %}
</div>
{% endblock page_header %}
{% block content %}
    <ul class="list-group ps-2">
        {% for entry in entries %}
            <div class="card mb-4">
                <div class="card-body bg-dark text-white rounded">
                    {% if user.is_authenticated and user == post.owner %}
                        <h4>{{ entry.date_added|date:'d M Y H:i' }} - <small><a href="{% url 'blog:edit_entry' entry.id %}" class="btn btn-light">Edit entry</a> </small></h4>
                    {% else %}
                    <h4>{{ entry.date_added|date:'d M Y H:i' }}</h4>
                    {% endif %}
                    <p style="white-space: pre-wrap;">{{ entry.text }}</p>
                    {% if user.is_authenticated and user == post.owner %}
                        <form method="post" action="{% url 'blog:delete_entry' entry.id %}" class="d-inline mt-2" onsubmit="return confirm('Delete this entry?');">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-sm btn-outline-danger">Delete entry</button>
                        </form>
                    {% endif %}
                </div>
            </div>
        {% empty %}
            <p>There are no entries yet</p>
        {% endfor %}
    </ul>
{% endblock content %}